План
================

Вступ
-----

Основний інструмент роботи: R. Перевага використання саме програмування для отримання інформації з веб-сторінок у дешевизні та гнучкості інструменту. Ви зможете пристосувати його під будь-яку задачу, яка стосується отримання інформації з веб-сторінок.

В цьому курсі мова буде йти про способи отримання інформації з веб-сторінок. Загалом є два основних механізми:

-   робота з Web API
-   парсинг

Оскільки мова йде про отримання і поальше зберігання даних, то вступне заняття буде у великій мірі присвячено форматам даних в R.

Працювати ми будемо з такими форматами даних:

-   vector
-   data\_frame
-   list

Крім цього, розглянемо, як обробити в R файл у форматі json.

Робота з Web API
----------------

Зміст: бібліотека httr та методи POST і GET

Практична користь: як отримати стандартизовані дані з бази веб-сторінки.

### Як працювати з будь-яким API

Зміст: алгоритм написання функції для отримання інформації з будь-якого сайту, у якого є API.

Практична користь: виникає проблема отримання даних із сайту, у якого є API, але нема готового інструменту взаємодії з ним в R. Як самому за короткий строк це зробити?

### Web API Facebook

Зміст: робота з бібліотекою Rfacebook

Практична користь: найшвидший спосіб отримати великий масив даних інформації з публічних сторінок та груп Facebook. Однак він не діє для персональних сторінок.

### API Twitter & VK

Зміст:

Практична користь:

Парсинг
-------

Зміст:

Практична користь:

### Імітація роботи браузера в RSelenium

Зміст:

Практична користь:

### Швидка обробка веб-сторінок у бібліотеці rvest

Зміст:

Практична користь:

### Парсинг новин в readability

Зміст:

Практична користь:

``` r
library(xml2)
library(httr)
library(reticulate)
library(magrittr)

res <- GET("https://hmarochos.kiev.ua/2017/09/06/kvartirne-pitannya-chi-legko-orenduvati-zhitlo-u-kiyevi/")

readability <- import("readability") # pip install readability-lxml

doc <- readability$Document(httr::content(res, as="text", endoding="UTF-8"))

doc$summary() %>%
  read_xml() %>%
  xml_text() %>% cat()
```

    ## «Хмарочос» з’ясовував, з якими труднощами зіштовхуються містяни, які хочуть переїхати до нової оселі.   Новачки, які ще жодного разу не орендували житло, завжди знайомляться з простими правилами. Договір зазвичай підписується на рік або півроку. Платити треба одразу за перший та останній місяці. Комунальні послуги оплачуються самостійно. Якщо ж гроші за них отримує господар квартири, то необхідно брати з нього розписку. Коли оглядаєш квартиру — треба перевірити, чи працюють крани, електрика, газопостачання. А коли заселяєшся до неї — можна стикнутись з тим, що власник захоче зробити опис свого майна.  Але ж де шукати саму квартиру: звертатися до ріелторів, розпитувати знайомих чи розміщати оголошення у соцмережах?За все треба платитиЗнайти квартиру за допомогою ріелтора доволі просто, пояснює Руслана, яка працювала в одному з столичних агентств нерухомості.Треба лише обрати квартиру на сайті агентства та записатися на її перегляд. Якщо помешкання сподобалося — підписати договір оренди. Фактично, головні завдання ріелтора — звести орендаря з орендодавцем, перевірити документи на квартиру та скласти письмовий договір між ними.«Моя компанія не працювала з клієнтами, які шукали для себе надто бюджетні варіанти, менше ніж за п’ять тисяч гривень. При цьому у нашій базі постійно фігурували досить посередні квартири — без ремонту, без меблювання, розташовані далеко від метро та зупинок наземного транспорту. Але навіть таке житло коштувало не менше шести тисяч», — розповідає Руслана.  За словами дівчини, в агентстві діяла негласна установка: співробітники мають шукати привід, щоб підняти для клієнта ціну. У хід йшло все, навіть предмети інтер’єру: якщо у квартирі є завалящий кондиціонер, скрипучий диван або допотопна мікрохвильовка — то вартість оренди одразу зростала.   «Як такої, роботи в офісі нема, ти постійно на ногах. Хіба зранку продзвонюєш всіх, хто здає квартири. Потім — тих, хто шукає. Плануєш їхні зустрічі, намагаючись призначити їх на той самий день. Після цього — їдеш на перегляди квартир». Ріелтор має бути дуже комунікабельним та відкритим із клієнтами. Водночас, йому треба відволікти їхню увагу від можливих недоліків у квартирі. Адже саме від того, наскільки вона їм сподобається, залежить ріелторська зарплата. Щойно клієнт підписав договір — ріелтор отримує відсотки. За словами Руслани, в її компанії ця частка становила 20%.Іноді виникають проблеми з орендодавцями. Руслана згадує про власницю квартири, яка категорично не хотіла здавати її чоловіку з донецькою пропискою. Той респектабельно виглядав, розмовляв дуже ввічливо, а приїхав на досить дорогому автомобілі. Але паспортних даних для власниці було достатньо.Фото: Flickr / Tom GodberВтім, ріелтори не можуть знати все і про власників. Через це неприємні сюрпризи інколи чекають і на квартирантів.  «Я декілька разів користувалася послугами ріелторів, і жодних претензій до них не було, — розповідає Наталя, копірайтер в одному з провідних SMM-агентств. — Так, з їхньою допомогою я знайшла дуже затишний приватний дім на Караваєвих дачах. Все було добре, поки господар будинку — 70-річний дідусь — не почав розпитувати, чи є у мене хлопець, і не став пропонувати з ним жити. Тому довелося переїжджати».  Без посередників і з пересторогою«Я вже давно не маю справ із агентствами, — розповідає на форумі нерухомості один з київських орендодавців. — Я одразу роблю оголошення на безкоштовних ресурсах, зокрема на OLX. Але чимало орендарів і досі платять посередникам, хоча ті просто проглядають документи на право власності та заповняють ксерокопії договорів оренди».  Натомість співрозмовники «Хмарочосу», які орендують житло у Києві, кажуть, що самостійні пошуки квартири — це постійні побоювання, чи не виявиться її власник шахраєм. Якщо навіть деякі офіційні ріелтори можуть «підсунути» некомфортні квартири або заманювати на перегляд фальшивими фотографіями, то ще вже казати про зовсім незнайомих людей?Одне з головних правил оренди житла — не покладатися на усні домовленості, навіть якщо господарі квартири і видаються вартими довіри. Але проблема в тому, що й підписаний із власником квартири договір мало що гарантує. Нерідко трапляються ситуації, коли квартирантів просять на вихід, хоча у договорі прописані зовсім інші терміни. Єдиний вихід — судитися з несумлінним орендодавцем. Але мало хто з квартирантів має на це час і натхнення.Одне з головних правил оренди житла — не покладатися на усні домовленості«Два роки тому я орендувала житло за допомогою знайомих. Вони порекомендували мені квартиру неподалік від метро «Палац Україна», де жили майже два роки. Квартира була просторою і затишною, район — доволі тихим, за кімнату треба було платити дві тисячі гривень та комунальні. Я підписала з її господарем договір оренди на рік. І прожила там лише один місяць, оскільки він раптом повідомив, що квартира вже продається і я маю її звільнити. Якомога швидше», — згадує Наталя. «Це ніби лотерея. Наприклад, в одній з квартир, яку орендували на рік, ми прожили менше півроку. Власниця зненацька повідомила нам, що її дочка одружується і нам треба якнайскоріше з’їжджати, — розповідає Ольга, яка працює менеджером у магазині одягу. — Щоправда, вона одразу повернула нам заставу. Іншого разу ми орендували будинок, у якого виявилося одразу два власника. Один з них постійно приходив до нас, розмахував якимись паперами, погрожував і вимагав, щоб ми забиралися з його будинку. Був і випадок, коли власники орендованої нами квартири — подружня пара — вирішили розлучитися, але виганяти почали нас. Були і хороші приклади. Якось наші сусіди по квартирі тихцем поїхали з неї, нічого не заплативши орендодавцю. Але той навіть взяв на себе оплату наших комунальних платежів, поки не знайшлися інші квартиранти».Про такі випадки згадують й співробітники агентств нерухомості. Але частіше це трапляється у житлі високого цінового сегменту — господарі самі оплачують зростаючі комунальні платежі, щоб вдержати своїх постояльців.   Сила фейсбукуУ соцмережах все частіше з’являються тематичні спільноти для пошуку житла. Однією з найпопулярніших залишається група у фейсбуці «Ріелтори – зло».   Схема її роботи дуже проста. Орендодавці публікують пропозиції, потенційні орендарі постійно проглядають стрічку групи та напряму зв’язуються з ними. Відгуки залишаються у коментарях. Запорука успіху — не тільки зручність та доступна ціна квартири, але й репутація її власника. Втім, користувачі можуть перевірити далеко не кожного власника квартири або орендаря. «Нову квартиру ми з подругою знайшли, прочитавши оголошення у групі на фейсбуці «Ріелтори-зло». Його розмістила дівчина, яка прожила там більше року. Житло пропонували у дев’ятиповерхівці прямо навпроти мого офісу. Квартира одразу нам сподобалась — простора, доглянута, обставлена новими меблями. Її власниця жила у Полтаві і взагалі нас не турбувала. Єдина її умова — вчасна оплата оренди. Ми віддавали по чотири тисячі гривень з квартиранта та оплачували комунальні послуги».Фото: Flickr / Rustam BikbovНіщо не віщувало неприємностей, — продовжує Наталя, — аж поки мені не почав постійно дзвонити співробітник колекторської контори. Виявилося, що цю квартиру господарка придбала у кредит і нічого не виплачує за неї, заборгувавши банку вже сто тисяч доларів. Колектор настирливо вимагав у мене її контакти. Спочатку він пропонував за це тисячу доларів, але потім став залякувати тим, що вона ніби вже переоформила на мене право власності й тепер я маю виплачувати увесь борг. До речі, по його словам, мій номер він взяв у місцевому банку, де я завжди платила комунальні послуги.Власниця, дізнавшись про це, не дуже здивувалась. Вона пообіцяла наступного дня приїхати та все пояснити. А вже невдовзі повідомила, що проблему вирішено, але я можу з’їжджати, якщо хочу. І майже одразу відключила телефон».«За список квартир — 250 грн.
    ## За їхню оренду – дві тисячі»Один з співрозмовників «Хмарочоса», який тривалий час шукав житло на різних онлайн-ресурсах, розповідає, що зараз у мережі з’явилося чимало сторінок з фейковими оголошеннями. «Прогортаєш демонстраційні сторінки — і начебто все добре: великий вибір квартир, зручне розташування, приваблива ціна. За повноцінний двотижневий доступ до цієї бази треба заплатити 400 грн. Але, як виявляється, цей відкритий доступ нічого не дає: фотографій нема, точної адреси — також. А власники житла або не братимуть слухавку, або запевнятимуть, що квартира вже здана, хоча у базі вона досі активна».Втім, окремі користувачі на форумах нерухомості схильні пояснювати це доволі оригінально — мовляв, жодного шахрайства тут немає. Просто власники квартир дуже заклопотані та забудькуваті.«Багато хто з власників, запускаючи у мережі рекламу своєї квартири, купують для цього нові сім-карти, щоб їхній основний номер не обривали постійними дзвінками. Після того, як вони здають квартиру, то викидають «сімку», а видалити оголошення — просто забувають».Замість висновку Так як ринок оренди житла є неврегульованим, і орендодавець, і орендар квартири опиняються в зоні ризику. Тому у конфліктних ситуаціях, які не мають простих рішень, покладатись треба на власну навичку ведення переговорів. Адже в умовах відсутності регуляції це вміння може захистити ваші інтереси.
